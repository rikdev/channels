get_target_property(MAIN_TARGET_SOURCES ${PROJECT_NAME}::${LIBRARY_NAME} SOURCES)
get_target_property(MAIN_TARGET_SOURCE_DIR ${PROJECT_NAME}::${LIBRARY_NAME} SOURCE_DIR)
list(TRANSFORM MAIN_TARGET_SOURCES PREPEND "${MAIN_TARGET_SOURCE_DIR}/")

find_program(CLANG_TIDY_PROGRAM_PATH clang-tidy)
add_custom_target(
  clang-tidy
  COMMAND ${CLANG_TIDY_PROGRAM_PATH} -p ${CMAKE_CURRENT_BINARY_DIR} ${MAIN_TARGET_SOURCES}
)

find_program(CLANG_DOC_PROGRAM_PATH clang-doc)
add_custom_target(
  clang-doc
  COMMAND ${CLANG_DOC_PROGRAM_PATH} -format=md -p ${CMAKE_CURRENT_BINARY_DIR} ${MAIN_TARGET_SOURCES}
)
